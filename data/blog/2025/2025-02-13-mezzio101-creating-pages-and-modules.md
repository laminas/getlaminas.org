---
id: 2025-02-13-mezzio101-creating-pages-and-modules
author: bidi
title: 'Mezzio 101: Creating Pages and Modules'
draft: false
public: true
created: '2025-02-13T11:00:00-01:00'
updated: '2025-02-13T11:00:00-01:00'
tags:
    - mezzio
    - skeleton
    - tutorial
    - content-management
    - cli
---

In the previous article we used the Mezzio Skeleton Installer to build a very basic application.
Let's explore what we can do with it right away.

The current components allow us to build a presentation site with static pages.
It may not be much to speak of yet, but we can already create new pages and organize them in multiple modules.

<!--- EXTENDED -->

### Creating a new page

From the beginning, the Mezzio Skeleton Installer creates a home page that lists the components we chose during installation.
Feel free to edit that page however you see fit.
Don't worry about any dynamic twig elements for now.

What if you want a new page, like an 'About Us' page?
Let's see how we can do this using this Mezzio CLI command.

```php
composer mezzio mezzio:handler:create "App\Handler\AboutHandler"
```

Below are the new files created by the command:

- `src/App/src/Handler/AboutHandler.php`
- `src/App/src/Handler/AboutHandlerFactory.php`
- `config/autoload/mezzio-tooling-factories.global.php` (unless it already exists)
- `src/App/templates/app/about.html.twig`

The only thing left for us to do manually is set up the routing for our new page at `http://localhost:8080/about`.

Let's look at these changes in detail.

#### The new handler

A new file is created under `src/App/src/Handler/AboutHandler.php`.
So far the only functionality it contains is to render the new template file.

```php
<?php

declare(strict_types=1);

namespace App\Handler;

use Psr\Http\Message\ResponseInterface;
use Psr\Http\Message\ServerRequestInterface;
use Psr\Http\Server\RequestHandlerInterface;
use Laminas\Diactoros\Response\HtmlResponse;
use Mezzio\Template\TemplateRendererInterface;

class AboutHandler implements RequestHandlerInterface
{
    /**
     * @var TemplateRendererInterface
     */
    private $renderer;

    public function __construct(TemplateRendererInterface $renderer)
    {
        $this->renderer = $renderer;
    }

    public function handle(ServerRequestInterface $request) : ResponseInterface
    {
        // Do some work...
        // Render and return a response:
        return new HtmlResponse($this->renderer->render(
            'app::about',
            [] // parameters to pass to template
        ));
    }
}
```

#### The new factory

The new handler has a Factory created here `src/App/src/Handler/AboutHandlerFactory.php`.
Its basically returns the `AboutHandler` class with a template renderer as a dependency.

```php
<?php

declare(strict_types=1);

namespace App\Handler;

use Mezzio\Template\TemplateRendererInterface;
use Psr\Container\ContainerInterface;

class AboutHandlerFactory
{
    public function __invoke(ContainerInterface $container) : AboutHandler
    {
        return new AboutHandler($container->get(TemplateRendererInterface::class));
    }
}
```

#### The ConfigProvider file

The Factory must be registered in order to work, but this is also done automatically.
The file `config/autoload/mezzio-tooling-factories.global.php` is created with this content:

```php
<?php

/**
 * This file generated by Mezzio\Tooling\Factory\ConfigInjector.
 *
 * Modifications should be kept at a minimum, and restricted to adding or
 * removing factory definitions; other dependency types may be overwritten
 * when regenerating this file via mezzio-tooling commands.
 */
 
declare(strict_types=1);

return [
    'dependencies' => [
        'factories' => [
            App\Handler\AboutHandler::class => App\Handler\AboutHandlerFactory::class,
        ],
    ],
];
```

All future handlers created using the CLI will update this file with more dependencies.

#### The new template

The handler returns a `HtmlResponse` with the template file `app::about`.
If you check `src/App/src/ConfigProvider.php`, you can see what that string means under the `getTemplates` method:

- `app` defines a folder in which the template file is kept, in this case `__DIR__ . '/../templates/app'` which resolves to `src/App/templates/app`.
- `about` is the template filename without the extensions.

The template full name is `about.html.twig` and it initially has only this content:

```html
Template for App\Handler\AboutHandler
```

We can replace that content to make use of the `default` template by overwriting `about.html.twig` with the below:

```twig
{% extends '@layout/default.html.twig' %}

{% block title %}About Us{% endblock %}

{% block content %}
    <div class="jumbotron">
        <h1>About Us</h1>
        <p>This is some great content!</p>
    </div>
{% endblock %}
```

The `about` template now extends the `default` template, meaning it uses its layout and populates its `title` and `content` blocks.

#### The routing

Finally, we need to add the new handler to the `config/routes.php` file by hand.
On the bottom of the file we already have 2 entries created by the Mezzio Skeleton Installer.
You can check the Handler names to tell what each of them is for.

For the new page, we need to append the line for the `AboutHandler` to that list, like we have done below.
Below is what the return statement should look like:

```php
return static function (Application $app, MiddlewareFactory $factory, ContainerInterface $container): void {
    $app->get('/', App\Handler\HomePageHandler::class, 'home');
    $app->get('/api/ping', App\Handler\PingHandler::class, 'api.ping');
    $app->get('/about', App\Handler\AboutHandler::class, 'about');
};
```

#### The result

You are done!
Next make sure to have your web server started by running this command in your project folder `php -S 0.0.0.0:8080 -t public`.
To visit your new page, type this url in the browser `http://localhost:8080/about`.

### Creating a new module

It is recommended to create new Modules for handlers that have shared goals.
You can split your custom code into e.g. `Authorization`, `Admin` or `Billing` modules to keep everything properly structured.
It helps to have functionality contained in a single module when you intend to use it in multiple applications.

If you want to organize your pages in several modules, Mezzio Tooling provides an easy method to create the basic folder structure for a module.
Run this command to create and register the module named `Page`.
Obviously, you can use whatever name is relevant for your module.

```shell
composer mezzio mezzio:module:create Page
```

The command will perform the following actions:

- Create the folders `src/Page/src` and `src/Page/templates`.
- Create the file `src/Page/src/ConfigProvider.php` with a basic configuration for templates.
- Add the above ConfigProvider in the aggregator in `config/config.php`.
- Register the module in `composer.json`, under the `autoload` key.

This module can now have handlers, factories and templates created like we explored in the first part of this article.

### Additional Resources

Learn more about [Command Line Tooling](https://docs.mezzio.dev/mezzio/v3/reference/cli-tooling/)
